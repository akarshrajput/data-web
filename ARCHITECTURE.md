# Data Marketplace - System Architecture

## ðŸ—ï¸ High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CLIENT                               â”‚
â”‚                   (Web Browser)                              â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚          Next.js Frontend (Port 3000)                â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚  â€¢ React Components (Shadcn UI)                      â”‚   â”‚
â”‚  â”‚  â€¢ State Management (Zustand)                        â”‚   â”‚
â”‚  â”‚  â€¢ API Client (Axios)                                â”‚   â”‚
â”‚  â”‚  â€¢ Razorpay Integration                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚ HTTP/HTTPS Requests
                        â”‚ (REST API Calls)
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Node.js Backend (Port 3001)                     â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Express REST API                         â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚  Authentication Middleware (JWT)             â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚   Auth       â”‚    Data      â”‚   Payment    â”‚     â”‚  â”‚
â”‚  â”‚  â”‚ Controller   â”‚ Controller   â”‚ Controller   â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚   User       â”‚    Data      â”‚  Purchase    â”‚     â”‚  â”‚
â”‚  â”‚  â”‚   Model      â”‚   Model      â”‚   Model      â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚                â”‚
                        â”‚                â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                              â”‚
         â–¼                                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MongoDB Atlas     â”‚                   â”‚   Razorpay API      â”‚
â”‚   (Database)        â”‚                   â”‚   (Payments)        â”‚
â”‚                     â”‚                   â”‚                     â”‚
â”‚  â€¢ Users            â”‚                   â”‚  â€¢ Create Orders    â”‚
â”‚  â€¢ Data Records     â”‚                   â”‚  â€¢ Verify Payments  â”‚
â”‚  â€¢ Purchases        â”‚                   â”‚  â€¢ Process Trans.   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ“Š Data Flow Diagrams

### 1. User Registration & Login Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     Register/Login      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      Validate       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚ Backend â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚ MongoDB  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â–²                                     â”‚
     â”‚              JWT Token              â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Browse Data Flow (with Filters)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Apply Filters   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Query DB    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚ Backend  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚ MongoDB  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â–²                               â”‚                          â”‚
     â”‚                               â”‚                          â”‚
     â”‚     Blurred Data (Top 10)    â”‚      Full Data           â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Purchase Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”  Select Quantity  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  Create Order  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚ Backend â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚ Razorpay â”‚
â””â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚                             â”‚                           â”‚
   â”‚                             â”‚       Order Details       â”‚
   â”‚                             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚                             â”‚
   â”‚       Razorpay Checkout     â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                             â”‚
   â”‚       Payment Success       â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                             â”‚
   â”‚                             â”‚  Verify Payment
   â”‚                             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                             â”‚                   â”‚
   â”‚                             â”‚  Create Snapshot  â–¼
   â”‚                             â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                             â””â”€>â”‚ MongoDB  â”‚
   â”‚                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚                                     â”‚
   â”‚        Data Snapshot Created       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. View Purchased Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”   Request Data    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Get Snapshot   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚ Backend â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚ MongoDB  â”‚
â””â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â–²                             â”‚                            â”‚
   â”‚         Full Data            â”‚       Data Snapshot       â”‚
   â”‚         (Unblurred)          â”‚                           â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5. Admin Upload Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”   Upload Data    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Validate    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Admin â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚ Backend â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚ MongoDB  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚                         â”‚
                                 â”‚  Check Admin Role       â”‚
                                 â”‚  Create Data Record     â”‚
                                 â”‚                         â”‚
                                 â”‚     Success Response    â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ” Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Authentication Flow                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. User Registration
   â”Œâ”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ User â”‚ Register â”‚ Backend â”‚  Hash    â”‚ MongoDB  â”‚
   â”‚      â”‚ â”€â”€â”€â”€â”€â”€â”€> â”‚         â”‚ Password â”‚          â”‚
   â”‚      â”‚          â”‚         â”‚ â”€â”€â”€â”€â”€â”€>  â”‚  Store   â”‚
   â”‚      â”‚ <â”€â”€â”€â”€â”€â”€â”€ â”‚         â”‚ <â”€â”€â”€â”€â”€â”€  â”‚   User   â”‚
   â”‚      â”‚   Token  â”‚         â”‚          â”‚          â”‚
   â””â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2. User Login
   â”Œâ”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ User â”‚  Login   â”‚ Backend â”‚  Verify  â”‚ MongoDB  â”‚
   â”‚      â”‚ â”€â”€â”€â”€â”€â”€â”€> â”‚         â”‚ Password â”‚          â”‚
   â”‚      â”‚          â”‚         â”‚ â”€â”€â”€â”€â”€â”€>  â”‚   Get    â”‚
   â”‚      â”‚ <â”€â”€â”€â”€â”€â”€â”€ â”‚         â”‚ <â”€â”€â”€â”€â”€â”€  â”‚   User   â”‚
   â”‚      â”‚   Token  â”‚  Create â”‚          â”‚          â”‚
   â”‚      â”‚          â”‚   JWT   â”‚          â”‚          â”‚
   â””â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. Protected Request
   â”Œâ”€â”€â”€â”€â”€â”€â”   Request + Token   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ User â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚ Backend â”‚
   â”‚      â”‚                      â”‚         â”‚
   â”‚      â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ Verify  â”‚
   â”‚      â”‚    â”‚                 â”‚  Token  â”‚
   â”‚      â”‚    â”‚  If Valid       â”‚         â”‚
   â”‚      â”‚ <â”€â”€â”˜                 â”‚         â”‚
   â”‚      â”‚    Response          â”‚         â”‚
   â””â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ—„ï¸ Database Schema Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       User          â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ _id                 â”‚â—„â”€â”€â”€â”€â”
â”‚ name                â”‚     â”‚
â”‚ email               â”‚     â”‚
â”‚ password (hashed)   â”‚     â”‚
â”‚ role (user/admin)   â”‚     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
                             â”‚
                             â”‚ uploadedBy
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚       Data          â”‚     â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚     â”‚
â”‚ _id                 â”‚     â”‚
â”‚ name                â”‚     â”‚
â”‚ type                â”‚     â”‚
â”‚ email               â”‚     â”‚
â”‚ phone               â”‚     â”‚
â”‚ address {...}       â”‚     â”‚
â”‚ category            â”‚     â”‚
â”‚ industry            â”‚     â”‚
â”‚ uploadedBy          â”‚â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²
         â”‚ references
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Purchase        â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ _id                 â”‚
â”‚ user                â”‚â”€â”€â”€â”€â”€â”
â”‚ quantity            â”‚     â”‚
â”‚ totalAmount         â”‚     â”‚
â”‚ purchasedData[]     â”‚â”€â”€â”€â”€â”€â”¤ References
â”‚ dataSnapshot[]      â”‚     â”‚ (stored copy)
â”‚ razorpayOrderId     â”‚     â”‚
â”‚ razorpayPaymentId   â”‚     â”‚
â”‚ paymentStatus       â”‚     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚       User          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ“¡ API Endpoint Structure

```
/api
â”œâ”€â”€ /auth
â”‚   â”œâ”€â”€ POST   /register     # Create new user
â”‚   â”œâ”€â”€ POST   /login        # Authenticate user
â”‚   â””â”€â”€ GET    /me           # Get current user
â”‚
â”œâ”€â”€ /data
â”‚   â”œâ”€â”€ POST   /filter       # Get filtered data (blurred)
â”‚   â”œâ”€â”€ GET    /filter-options  # Get available filters
â”‚   â”œâ”€â”€ POST   /upload       # Upload data (admin)
â”‚   â”œâ”€â”€ GET    /all          # Get all data (admin)
â”‚   â”œâ”€â”€ GET    /:id          # Get single data (admin)
â”‚   â”œâ”€â”€ PUT    /:id          # Update data (admin)
â”‚   â””â”€â”€ DELETE /:id          # Delete data (admin)
â”‚
â”œâ”€â”€ /payment
â”‚   â”œâ”€â”€ POST   /create-order # Create Razorpay order
â”‚   â”œâ”€â”€ POST   /verify       # Verify payment
â”‚   â””â”€â”€ GET    /key          # Get Razorpay key
â”‚
â””â”€â”€ /purchase
    â”œâ”€â”€ POST   /complete/:id # Complete purchase
    â”œâ”€â”€ GET    /my-purchases # Get user purchases
    â”œâ”€â”€ GET    /:id          # Get purchase details
    â””â”€â”€ GET    /:id/data     # Get purchased data
```

## ðŸŽ¨ Frontend Component Structure

```
app/
â”œâ”€â”€ layout.jsx (Root layout)
â”œâ”€â”€ page.jsx (Homepage)
â”œâ”€â”€ globals.css
â”‚
â”œâ”€â”€ /login
â”‚   â””â”€â”€ page.jsx (Login form)
â”‚
â”œâ”€â”€ /register
â”‚   â””â”€â”€ page.jsx (Signup form)
â”‚
â””â”€â”€ /dashboard
    â”œâ”€â”€ layout.jsx (Dashboard layout with nav)
    â”œâ”€â”€ page.jsx (Browse data with filters)
    â”‚
    â”œâ”€â”€ /purchase
    â”‚   â””â”€â”€ page.jsx (Purchase flow)
    â”‚
    â”œâ”€â”€ /purchases
    â”‚   â”œâ”€â”€ page.jsx (Purchase list)
    â”‚   â””â”€â”€ /[id]
    â”‚       â””â”€â”€ page.jsx (View purchased data)
    â”‚
    â””â”€â”€ /admin
        â””â”€â”€ /upload
            â””â”€â”€ page.jsx (Admin upload form)

components/
â”œâ”€â”€ DashboardNav.jsx
â””â”€â”€ /ui
    â”œâ”€â”€ button.jsx
    â”œâ”€â”€ card.jsx
    â”œâ”€â”€ input.jsx
    â”œâ”€â”€ label.jsx
    â”œâ”€â”€ select.jsx
    â””â”€â”€ table.jsx
```

## ðŸ”„ State Management Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Zustand Store                         â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                           â”‚
â”‚  authStore:                                              â”‚
â”‚    - user (object)                                       â”‚
â”‚    - token (string)                                      â”‚
â”‚    - isAuthenticated (boolean)                           â”‚
â”‚    - setAuth(user, token)                                â”‚
â”‚    - logout()                                            â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â–²
                         â”‚
                         â”‚ Used by
                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Auth  â”‚                     â”‚ Protectedâ”‚
    â”‚ Pages  â”‚                     â”‚  Routes  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ’¾ Data Snapshot Mechanism

```
Purchase Flow with Snapshot:

1. User selects filters
   â”œâ”€> Backend queries database
   â””â”€> Returns top 10 blurred results

2. User purchases X records
   â”œâ”€> Payment processed
   â””â”€> Backend queries DB again with same filters

3. Create complete snapshot
   â”œâ”€> Get exact X records matching filters
   â”œâ”€> Store complete data in purchase.dataSnapshot
   â””â”€> Store IDs in purchase.purchasedData

4. Future access
   â”œâ”€> User requests purchased data
   â”œâ”€> Backend returns dataSnapshot (not current DB data)
   â””â”€> User sees data from purchase time only

Why? If admin adds new data later, purchased data doesn't change!
```

## ðŸŽ¯ Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Security Layers                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 1: HTTPS (in production)
         â””â”€> Encrypted communication

Layer 2: CORS
         â””â”€> Only allowed origins can access API

Layer 3: JWT Authentication
         â””â”€> Verify user identity on each request

Layer 4: Role-Based Access
         â””â”€> Check user role for admin endpoints

Layer 5: Password Hashing
         â””â”€> Bcrypt with salt rounds

Layer 6: Payment Verification
         â””â”€> Razorpay signature validation

Layer 7: Input Validation
         â””â”€> Validate and sanitize all inputs
```

## ðŸ“± Responsive Design Flow

```
Device Detection
        â”‚
        â”œâ”€> Mobile (< 768px)
        â”‚   â””â”€> Stack components vertically
        â”‚       â””â”€> Hide/collapse filters by default
        â”‚
        â”œâ”€> Tablet (768px - 1024px)
        â”‚   â””â”€> 2-column grid for cards
        â”‚       â””â”€> Collapsible sidebar
        â”‚
        â””â”€> Desktop (> 1024px)
            â””â”€> 3-column grid for cards
                â””â”€> Full-width filters
```

---

**This architecture ensures:**

- âœ… Scalability (separate frontend/backend)
- âœ… Security (multiple layers)
- âœ… Maintainability (clear separation of concerns)
- âœ… Performance (efficient queries, caching)
- âœ… User Experience (fast, responsive, intuitive)
